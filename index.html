<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="google-adsense-account" content="ca-pub-9229750660830893">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mandelbulb Explorer</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <canvas id="glCanvas" aria-label="Mandelbulb viewport"></canvas>

    <div id="movementHint" class="movement-hint" aria-label="Movement guide">
        <p id="movementHintTitle" class="movement-hint-title">Use WASD to move</p>
        <div class="movement-keys" aria-hidden="true">
            <span class="movement-key movement-key-w">W</span>
            <span class="movement-key movement-key-a">A</span>
            <span class="movement-key movement-key-s">S</span>
            <span class="movement-key movement-key-d">D</span>
        </div>
    </div>

    <div id="turnHint" class="movement-hint" aria-label="Turn guide" hidden>
        <p id="turnHintTitle" class="movement-hint-title">Use Arrow Keys to turn</p>
        <div class="movement-keys" aria-hidden="true">
            <span class="movement-key movement-key-w">&#8593;</span>
            <span class="movement-key movement-key-a">&#8592;</span>
            <span class="movement-key movement-key-s">&#8595;</span>
            <span class="movement-key movement-key-d">&#8594;</span>
        </div>
    </div>

    <div class="overlay-controls">
        <button id="helpButton" class="overlay-button" type="button" aria-haspopup="dialog" aria-controls="helpDialog">
            Help
        </button>
        <button id="settingsButton" class="overlay-button" type="button" aria-haspopup="dialog"
            aria-controls="settingsDialog">
            Settings
        </button>
    </div>

    <div id="helpPointerHint" class="help-pointer-hint" aria-label="Help shortcut" hidden>
        <span class="help-pointer-text">More controls in Help</span>
        <span class="help-pointer-arrow" aria-hidden="true">&#8599;</span>
    </div>

    <div id="helpDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="helpTitle" hidden>
        <div class="help-card">
            <div class="help-header">
                <h2 id="helpTitle">Movement Basics</h2>
                <button id="closeHelpButton" class="close-button" type="button" aria-label="Close help">Close</button>
            </div>
            <div id="helpDesktopContent">
                <p>Use these keyboard controls to navigate:</p>
                <ul>
                    <li><strong>Move forward/back:</strong> W / S</li>
                    <li><strong>Strafe left/right:</strong> A / D</li>
                    <li><strong>Move up/down:</strong> E / Q</li>
                    <li><strong>Look around:</strong> Arrow keys</li>
                    <li><strong>Sprint:</strong> Hold Shift</li>
                    <li><strong>Movement step:</strong> Z (smaller) / X (larger)</li>
                    <li><strong>Zoom (FOV):</strong> - (wider) / + (narrower)</li>
                </ul>
            </div>
            <div id="helpMobileContent" hidden>
                <p>Touch controls are enabled for your phone:</p>
                <ul>
                    <li><strong>Move:</strong> Left control pad</li>
                    <li><strong>Turn:</strong> Right control pad</li>
                    <li><strong>Move up/down:</strong> Up / Down buttons in the middle</li>
                    <li><strong>Fine tuning:</strong> Open Settings for render quality and style</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="settingsDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" hidden>
        <div class="help-card settings-card">
            <div class="help-header">
                <h2 id="settingsTitle">Rendering Settings</h2>
                <button id="closeSettingsButton" class="close-button" type="button"
                    aria-label="Close settings">Close</button>
            </div>

            <label class="setting-row" for="minHitSlider">
                <span>MIN_HIT (base-10 slider)</span>
                <div class="setting-inline">
                    <input id="minHitSlider" type="range" min="-6" max="-2" step="0.01" value="-3.5">
                    <output id="minHitValue" class="setting-value">3.16e-4</output>
                </div>
            </label>

            <label class="setting-row" for="modeSelect">
                <span>Mandelbulb mode</span>
                <select id="modeSelect">
                    <option value="1">Mode 1</option>
                    <option value="2">Mode 2</option>
                    <option value="3">Mode 3</option>
                </select>
            </label>

            <label class="setting-row" for="maxDistSlider">
                <span>Ray distance</span>
                <div class="setting-inline">
                    <input id="maxDistSlider" type="range" min="8" max="80" step="1" value="30">
                    <output id="maxDistValue" class="setting-value">30.0</output>
                </div>
            </label>

            <label class="setting-row" for="glowSlider">
                <span>Glow strength</span>
                <div class="setting-inline">
                    <input id="glowSlider" type="range" min="0" max="2" step="0.01" value="1">
                    <output id="glowValue" class="setting-value">1.00</output>
                </div>
            </label>

            <label class="setting-row" for="stepTintSlider">
                <span>Step tint blend</span>
                <div class="setting-inline">
                    <input id="stepTintSlider" type="range" min="0" max="1" step="0.01" value="1">
                    <output id="stepTintValue" class="setting-value">1.00</output>
                </div>
            </label>

            <div class="premium-block">
                <p id="premiumStatusText" class="premium-status">Premium export is locked.</p>
                <label class="setting-row" for="premiumPresetSelect">
                    <span>Premium render preset</span>
                    <select id="premiumPresetSelect" disabled>
                        <option value="balanced">Balanced</option>
                        <option value="ultra">Ultra</option>
                    </select>
                </label>
                <button id="unlockPremiumButton" class="close-button" type="button" aria-label="Unlock premium export">
                    Unlock Premium Export
                </button>
            </div>
        </div>
    </div>

    <div id="paywallDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="paywallTitle" hidden>
        <div class="help-card settings-card paywall-card">
            <div class="help-header">
                <h2 id="paywallTitle">Premium Export Unlock</h2>
                <button id="closePaywallButton" class="close-button" type="button"
                    aria-label="Close unlock dialog">Close</button>
            </div>
            <p>One-time unlock for clean high-quality renders.</p>
            <ul>
                <li><strong>No watermark</strong> on exported screenshots.</li>
                <li><strong>High-quality presets</strong> for improved detail.</li>
                <li><strong>Ads removed</strong> after unlock.</li>
            </ul>
            <button id="checkoutPremiumButton" class="overlay-button" type="button" aria-label="Go to checkout">
                Unlock Now
            </button>
        </div>
    </div>

    <div id="mobileControls" class="mobile-controls" aria-label="Touch controls" hidden>
        <div class="mobile-cluster">
            <span class="mobile-cluster-label">Move</span>
            <div class="mobile-pad" aria-hidden="true">
                <button class="mobile-key mobile-key-up" type="button" data-touch-keycode="87"
                    aria-label="Move forward">&#9650;</button>
                <button class="mobile-key mobile-key-left" type="button" data-touch-keycode="65"
                    aria-label="Strafe left">&#9664;</button>
                <button class="mobile-key mobile-key-down" type="button" data-touch-keycode="83"
                    aria-label="Move backward">&#9660;</button>
                <button class="mobile-key mobile-key-right" type="button" data-touch-keycode="68"
                    aria-label="Strafe right">&#9654;</button>
            </div>
        </div>

        <div class="mobile-elevation" aria-label="Vertical movement">
            <button class="mobile-pill" type="button" data-touch-keycode="69" aria-label="Move up">Up</button>
            <button class="mobile-pill" type="button" data-touch-keycode="81" aria-label="Move down">Down</button>
        </div>

        <div class="mobile-cluster">
            <span class="mobile-cluster-label">Turn</span>
            <div class="mobile-pad" aria-hidden="true">
                <button class="mobile-key mobile-key-up" type="button" data-touch-keycode="38"
                    aria-label="Look up">&#9650;</button>
                <button class="mobile-key mobile-key-left" type="button" data-touch-keycode="37"
                    aria-label="Turn left">&#9664;</button>
                <button class="mobile-key mobile-key-down" type="button" data-touch-keycode="40"
                    aria-label="Look down">&#9660;</button>
                <button class="mobile-key mobile-key-right" type="button" data-touch-keycode="39"
                    aria-label="Turn right">&#9654;</button>
            </div>
        </div>
    </div>

    <div id="mobileFovControl" class="mobile-fov-control" aria-label="FOV control" hidden>
        <label for="mobileFovSlider">FOV</label>
        <input id="mobileFovSlider" type="range" min="0.35" max="1.2" step="0.01" value="0.6" orient="vertical">
        <output id="mobileFovValue">0.60</output>
    </div>

    <button id="screenshotButton" class="screenshot-button" type="button" aria-label="Capture screenshot">
        <svg class="screenshot-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path
                d="M9 4l-1.2 2H5.5A2.5 2.5 0 0 0 3 8.5v9A2.5 2.5 0 0 0 5.5 20h13a2.5 2.5 0 0 0 2.5-2.5v-9A2.5 2.5 0 0 0 18.5 6h-2.3L15 4H9zm3 4.5A5.5 5.5 0 1 1 6.5 14 5.5 5.5 0 0 1 12 8.5zm0 2A3.5 3.5 0 1 0 15.5 14 3.5 3.5 0 0 0 12 10.5z" />
        </svg>
    </button>

    <div id="adContainer" class="ad-container" aria-label="Sponsor" hidden>
        <ins id="adSlot" class="adsbygoogle"></ins>
    </div>

    <div class="signature">Brendon Maia</div>

    <div id="errorBanner" class="error-banner" hidden></div>

    <script type="module" src="./main.js"></script>
</body>

</html>
