<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="google-adsense-account" content="ca-pub-9229750660830893">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mandelbulb Explorer</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg">
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <canvas id="glCanvas" aria-label="Mandelbulb viewport"></canvas>

    <section id="startScreen" class="start-screen" aria-label="Startup menu">
        <div class="start-screen-card">
            <div class="start-preview-block">
                <canvas id="startPreviewCanvas" width="360" height="220" aria-label="Surface preview"></canvas>
                <p class="start-preview-fps">Preview FPS: <span id="startPreviewFps">0</span></p>
            </div>
            <div class="start-controls-block">
                <h1 class="start-title">Mandelbulb Explorer</h1>
                <p class="start-warning">
                    Choose your render resolution before starting. Higher resolution looks sharper but can seriously
                    reduce FPS or crash weaker systems. Watch the preview FPS to pick a safe value.
                </p>
                <label class="setting-row" for="startResolutionSlider">
                    <span>Startup resolution scale</span>
                    <div class="setting-inline">
                        <input id="startResolutionSlider" type="range" min="0.5" max="1.5" step="0.05" value="1">
                        <output id="startResolutionValue" class="setting-value">1.00x</output>
                    </div>
                </label>
                <button id="startFractalButton" class="overlay-button start-fractal-button" type="button">
                    Start fractal
                </button>
            </div>
        </div>
    </section>

    <div class="social-links" aria-label="Social links">
        <a class="social-link" href="https://x.com/stack_overchill" target="_blank" rel="noopener noreferrer" aria-label="X profile">
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M18.9 2H22l-6.8 7.8L23.2 22h-6.3l-4.9-6.8L6 22H2.8l7.3-8.4L.8 2h6.4l4.4 6.2L18.9 2zm-1.1 18h1.8L6.2 3.9H4.3L17.8 20z"/>
            </svg>
        </a>
        <a class="social-link" href="https://github.com/brendonmlopes/" target="_blank" rel="noopener noreferrer" aria-label="GitHub profile">
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M12 .5a12 12 0 0 0-3.79 23.39c.6.11.82-.26.82-.58v-2.17c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.1-.75.08-.74.08-.74 1.21.09 1.85 1.24 1.85 1.24 1.08 1.84 2.83 1.31 3.52 1 .11-.78.42-1.31.76-1.61-2.67-.3-5.48-1.33-5.48-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.54-1.52.12-3.16 0 0 1.01-.32 3.31 1.23a11.42 11.42 0 0 1 6.03 0c2.3-1.55 3.31-1.23 3.31-1.23.66 1.64.24 2.86.12 3.16.77.84 1.24 1.91 1.24 3.22 0 4.61-2.81 5.62-5.49 5.92.43.37.82 1.1.82 2.22v3.29c0 .32.22.7.83.58A12 12 0 0 0 12 .5z"/>
            </svg>
        </a>
        <a class="social-link" href="https://www.linkedin.com/in/brendon-maia-lopes-a696581a4/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn profile">
            <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                <path d="M6.9 8.3a2.1 2.1 0 1 1 0-4.2 2.1 2.1 0 0 1 0 4.2zM5 9.8h3.7V21H5V9.8zm5.8 0h3.5v1.5h.1c.5-.9 1.7-1.8 3.5-1.8 3.7 0 4.4 2.4 4.4 5.6V21h-3.7v-5.1c0-1.2 0-2.8-1.7-2.8s-2 1.3-2 2.7V21h-3.7V9.8z"/>
            </svg>
        </a>
    </div>

    <div id="movementHint" class="movement-hint" aria-label="Movement guide">
        <p id="movementHintTitle" class="movement-hint-title">Use WASD to move</p>
        <div class="movement-keys" aria-hidden="true">
            <span class="movement-key movement-key-w">W</span>
            <span class="movement-key movement-key-a">A</span>
            <span class="movement-key movement-key-s">S</span>
            <span class="movement-key movement-key-d">D</span>
        </div>
    </div>

    <div id="turnHint" class="movement-hint" aria-label="Turn guide" hidden>
        <p id="turnHintTitle" class="movement-hint-title">Use arrows to turn</p>
        <div class="movement-keys" aria-hidden="true">
            <span class="movement-key movement-key-w">&#8593;</span>
            <span class="movement-key movement-key-a">&#8592;</span>
            <span class="movement-key movement-key-s">&#8595;</span>
            <span class="movement-key movement-key-d">&#8594;</span>
        </div>
        <p class="movement-hint-title movement-hint-title-secondary">or Click and drag</p>
        <div class="mouse-hint-icon" aria-hidden="true">
            <span class="mouse-hint-body"></span>
            <span class="mouse-hint-wheel"></span>
        </div>
    </div>

    <div class="overlay-controls">
        <button id="helpButton" class="overlay-button" type="button" aria-haspopup="dialog" aria-controls="helpDialog">
            Help
        </button>
        <button id="settingsButton" class="overlay-button" type="button" aria-haspopup="dialog"
            aria-controls="settingsDialog">
            Settings
        </button>
        <button id="hudToggleButton" class="overlay-button" type="button" aria-controls="statsOverlay">
            HUD
        </button>
    </div>

    <aside id="statsOverlay" class="stats-overlay" aria-label="Status overlay" hidden>
        <p><strong>POS</strong> <span id="statsPosition">0.00, 0.00, 0.00</span></p>
        <p><strong>FPS</strong> <span id="statsFps">0.0</span></p>
        <p><strong>SPEED</strong> <span id="statsSpeed">0.00</span></p>
        <p><strong>ZOOM</strong> <span id="statsZoom">1.00</span></p>
    </aside>

    <div id="helpPointerHint" class="help-pointer-hint" aria-label="Help shortcut" hidden>
        <span class="help-pointer-text">More controls in Help</span>
        <span class="help-pointer-arrow" aria-hidden="true">&#8599;</span>
    </div>

    <div id="helpDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="helpTitle" hidden>
        <div class="help-card">
            <div class="help-header">
                <h2 id="helpTitle">Movement Basics</h2>
                <button id="closeHelpButton" class="close-button" type="button" aria-label="Close help">Close</button>
            </div>
            <div id="helpDesktopContent">
                <p>Use these keyboard controls to navigate:</p>
                <ul>
                    <li><strong>Move forward/back:</strong> W / S</li>
                    <li><strong>Strafe left/right:</strong> A / D</li>
                    <li><strong>Move up/down:</strong> E / Q</li>
                    <li><strong>Look around:</strong> Arrow keys</li>
                    <li><strong>Sprint:</strong> Hold Shift</li>
                    <li><strong>Movement step:</strong> Z (smaller) / X (larger)</li>
                    <li><strong>Zoom (FOV):</strong> - (wider) / + (narrower)</li>
                </ul>
            </div>
            <div id="helpMobileContent" hidden>
                <p>Touch controls are enabled for your phone:</p>
                <ul>
                    <li><strong>Move:</strong> Left control pad</li>
                    <li><strong>Turn:</strong> Right control pad</li>
                    <li><strong>Move up/down:</strong> Up / Down buttons in the middle</li>
                    <li><strong>Fine tuning:</strong> Open Settings for render quality and style</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="settingsDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="settingsTitle" hidden>
        <div class="help-card settings-card">
            <div class="help-header">
                <h2 id="settingsTitle">Rendering Settings</h2>
                <button id="closeSettingsButton" class="close-button" type="button"
                    aria-label="Close settings">Close</button>
            </div>

            <label class="setting-row" for="renderScaleSlider">
                <span>Resolution</span>
                <div class="setting-inline">
                    <input id="renderScaleSlider" type="range" min="0.5" max="1.5" step="0.05" value="1">
                    <output id="renderScaleValue" class="setting-value">1.00x</output>
                </div>
            </label>

            <label class="setting-row" for="minHitSlider">
                <span>Detail threshold</span>
                <div class="setting-inline">
                    <input id="minHitSlider" type="range" min="0" max="10" step="0.01" value="3.75">
                    <output id="minHitValue" class="setting-value">3.16e-4</output>
                </div>
            </label>

            <label class="setting-row" for="modeSelect">
                <span>Mandelbulb mode</span>
                <select id="modeSelect">
                    <option value="1">Mode 1</option>
                    <option value="2">Mode 2</option>
                    <option value="3">Mode 3</option>
                </select>
            </label>

            <label class="setting-row" for="maxDistSlider">
                <span>Ray distance</span>
                <div class="setting-inline">
                    <input id="maxDistSlider" type="range" min="8" max="80" step="1" value="30">
                    <output id="maxDistValue" class="setting-value">30.0</output>
                </div>
            </label>

            <label class="setting-row" for="glowSlider">
                <span>Glow strength</span>
                <div class="setting-inline">
                    <input id="glowSlider" type="range" min="0" max="2" step="0.01" value="1">
                    <output id="glowValue" class="setting-value">1.00</output>
                </div>
            </label>

            <label class="setting-row" for="stepTintSlider">
                <span>Step tint blend</span>
                <div class="setting-inline">
                    <input id="stepTintSlider" type="range" min="0" max="1" step="0.01" value="1">
                    <output id="stepTintValue" class="setting-value">1.00</output>
                </div>
            </label>

            <label class="setting-row" for="visualPresetSelect">
                <span>Color + lighting preset</span>
                <select id="visualPresetSelect">
                    <option value="vibrant">Vibrant Sci-Fi</option>
                    <option value="cinematic">Cinematic Nebula</option>
                    <option value="neon">Neon Flux</option>
                    <option value="solar">Solar Forge</option>
                    <option value="custom">Custom</option>
                </select>
            </label>

            <label class="setting-row" for="baseHueSlider">
                <span>Primary hue</span>
                <div class="setting-inline">
                    <input id="baseHueSlider" type="range" min="0" max="360" step="1" value="220">
                    <output id="baseColorValue" class="setting-value">220째</output>
                </div>
            </label>

            <label class="setting-row" for="secondaryHueSlider">
                <span>Secondary hue</span>
                <div class="setting-inline">
                    <input id="secondaryHueSlider" type="range" min="0" max="360" step="1" value="28">
                    <output id="secondaryColorValue" class="setting-value">28째</output>
                </div>
            </label>

            <label class="setting-row" for="exposureSlider">
                <span>Exposure</span>
                <div class="setting-inline">
                    <input id="exposureSlider" type="range" min="0.4" max="2.6" step="0.01" value="1.15">
                    <output id="exposureValue" class="setting-value">1.15</output>
                </div>
            </label>

            <label class="setting-row" for="contrastSlider">
                <span>Contrast</span>
                <div class="setting-inline">
                    <input id="contrastSlider" type="range" min="0.7" max="1.7" step="0.01" value="1.08">
                    <output id="contrastValue" class="setting-value">1.08</output>
                </div>
            </label>

            <label class="setting-row" for="saturationSlider">
                <span>Saturation</span>
                <div class="setting-inline">
                    <input id="saturationSlider" type="range" min="0" max="2" step="0.01" value="1.2">
                    <output id="saturationValue" class="setting-value">1.20</output>
                </div>
            </label>

            <label class="setting-row" for="sunAzimuthSlider">
                <span>Sun azimuth</span>
                <div class="setting-inline">
                    <input id="sunAzimuthSlider" type="range" min="-180" max="180" step="1" value="32">
                    <output id="sunAzimuthValue" class="setting-value">32째</output>
                </div>
            </label>

            <label class="setting-row" for="sunElevationSlider">
                <span>Sun elevation</span>
                <div class="setting-inline">
                    <input id="sunElevationSlider" type="range" min="2" max="88" step="1" value="24">
                    <output id="sunElevationValue" class="setting-value">24째</output>
                </div>
            </label>

            <label class="setting-row" for="sunIntensitySlider">
                <span>Sun intensity</span>
                <div class="setting-inline">
                    <input id="sunIntensitySlider" type="range" min="0" max="2.8" step="0.01" value="1.25">
                    <output id="sunIntensityValue" class="setting-value">1.25</output>
                </div>
            </label>

            <label class="setting-row" for="fogDensitySlider">
                <span>Fog density</span>
                <div class="setting-inline">
                    <input id="fogDensitySlider" type="range" min="0" max="0.08" step="0.001" value="0.024">
                    <output id="fogDensityValue" class="setting-value">0.024</output>
                </div>
            </label>

            <label class="setting-row" for="roughnessSlider">
                <span>Surface roughness</span>
                <div class="setting-inline">
                    <input id="roughnessSlider" type="range" min="0.08" max="0.95" step="0.01" value="0.32">
                    <output id="roughnessValue" class="setting-value">0.32</output>
                </div>
            </label>

            <div class="premium-block">
                <p id="premiumStatusText" class="premium-status">Premium export is locked.</p>
                <label class="setting-row" for="premiumPresetSelect">
                    <span>Premium render preset</span>
                    <select id="premiumPresetSelect" disabled>
                        <option value="balanced">Balanced</option>
                        <option value="ultra">Ultra</option>
                    </select>
                </label>
                <button id="unlockPremiumButton" class="close-button" type="button" aria-label="Unlock premium export">
                    Unlock Premium Export
                </button>
            </div>
        </div>
    </div>

    <div id="paywallDialog" class="help-dialog" role="dialog" aria-modal="true" aria-labelledby="paywallTitle" hidden>
        <div class="help-card settings-card paywall-card">
            <div class="help-header">
                <h2 id="paywallTitle">Premium Export Unlock</h2>
                <button id="closePaywallButton" class="close-button" type="button"
                    aria-label="Close unlock dialog">Close</button>
            </div>
            <p>One-time unlock for clean high-quality renders.</p>
            <ul>
                <li><strong>No watermark</strong> on exported screenshots.</li>
                <li><strong>High-quality presets</strong> for improved detail.</li>
                <li><strong>Ads removed</strong> after unlock.</li>
            </ul>
            <button id="checkoutPremiumButton" class="overlay-button" type="button" aria-label="Go to checkout">
                Unlock Now
            </button>
        </div>
    </div>

    <div id="mobileControls" class="mobile-controls" aria-label="Touch controls" hidden>
        <div class="mobile-cluster">
            <span class="mobile-cluster-label">Move</span>
            <div class="mobile-pad" aria-hidden="true">
                <button class="mobile-key mobile-key-up" type="button" data-touch-keycode="87"
                    aria-label="Move forward">&#9650;</button>
                <button class="mobile-key mobile-key-left" type="button" data-touch-keycode="65"
                    aria-label="Strafe left">&#9664;</button>
                <button class="mobile-key mobile-key-down" type="button" data-touch-keycode="83"
                    aria-label="Move backward">&#9660;</button>
                <button class="mobile-key mobile-key-right" type="button" data-touch-keycode="68"
                    aria-label="Strafe right">&#9654;</button>
            </div>
        </div>

        <div class="mobile-elevation" aria-label="Vertical movement">
            <button class="mobile-pill" type="button" data-touch-keycode="69" aria-label="Move up">Up</button>
            <button class="mobile-pill" type="button" data-touch-keycode="81" aria-label="Move down">Down</button>
        </div>

        <div class="mobile-cluster">
            <span class="mobile-cluster-label">Turn</span>
            <div class="mobile-pad" aria-hidden="true">
                <button class="mobile-key mobile-key-up" type="button" data-touch-keycode="38"
                    aria-label="Look up">&#9650;</button>
                <button class="mobile-key mobile-key-left" type="button" data-touch-keycode="37"
                    aria-label="Turn left">&#9664;</button>
                <button class="mobile-key mobile-key-down" type="button" data-touch-keycode="40"
                    aria-label="Look down">&#9660;</button>
                <button class="mobile-key mobile-key-right" type="button" data-touch-keycode="39"
                    aria-label="Turn right">&#9654;</button>
            </div>
        </div>
    </div>

    <div id="mobileFovControl" class="mobile-fov-control" aria-label="FOV control" hidden>
        <label for="mobileFovSlider">FOV</label>
        <input id="mobileFovSlider" type="range" min="0.35" max="1.2" step="0.01" value="0.6" orient="vertical">
        <output id="mobileFovValue">0.60</output>
    </div>

    <div id="desktopSpeedControl" class="desktop-speed-control" aria-label="Vertical speed control" hidden>
        <label for="desktopSpeedSlider">Speed</label>
        <input id="desktopSpeedSlider" type="range" min="-5" max="5" step="1" value="0" orient="vertical">
        <output id="desktopSpeedValue">2^0</output>
    </div>

    <button id="screenshotButton" class="screenshot-button" type="button" aria-label="Capture screenshot">
        <svg class="screenshot-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path
                d="M9 4l-1.2 2H5.5A2.5 2.5 0 0 0 3 8.5v9A2.5 2.5 0 0 0 5.5 20h13a2.5 2.5 0 0 0 2.5-2.5v-9A2.5 2.5 0 0 0 18.5 6h-2.3L15 4H9zm3 4.5A5.5 5.5 0 1 1 6.5 14 5.5 5.5 0 0 1 12 8.5zm0 2A3.5 3.5 0 1 0 15.5 14 3.5 3.5 0 0 0 12 10.5z" />
        </svg>
    </button>

    <div id="adContainer" class="ad-container" aria-label="Sponsor" hidden>
        <ins id="adSlot" class="adsbygoogle"></ins>
    </div>

    <div class="signature">Brendon Maia</div>

    <div id="errorBanner" class="error-banner" hidden></div>

    <script type="module" src="./main.js"></script>
</body>

</html>
